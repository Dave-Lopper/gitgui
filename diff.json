{"addedLines":37,"newLineCount":771,"oldLineCount":762,"path":"server/modules/diff/domain/services.ts","removedLines":29,"staged":false,"status":"MODIFIED","hunks":[{"oldLineCount":9,"oldLineStart":268,"newLineCount":7,"newLineStart":268,"lines":[{"type":"CONTEXT","content":"   | \"ADDED\";\n","oldN":268,"newN":268},{"type":"CONTEXT","content":" \n","oldN":269,"newN":269},{"type":"REMOVED","n":270,"parts":[{"type":"CONTEXT","content":"export function "},{"type":"DIFF","content":"parseStatus("}]},{"type":"REMOVED","parts":[{"type":"DIFF","content":"  statusLines: string[]"}],"n":271},{"type":"REMOVED","parts":[{"type":"DIFF","content":"):"},{"type":"CONTEXT","content":" StatusEntry[] {"}],"n":272},{"type":"REMOVED","parts":[],"n":273},{"type":"ADDED","n":270,"parts":[{"type":"CONTEXT","content":"export function "}]},{"type":"ADDED","parts":[],"n":271},{"type":"ADDED","parts":[{"type":"DIFF","content":"parseStatus(statusLines: string[]):"},{"type":"CONTEXT","content":" StatusEntry[] {"}],"n":272},{"type":"ADDED","parts":[],"n":273},{"type":"REMOVED","parts":[],"n":274},{"type":"ADDED","parts":[],"n":274},{"type":"CONTEXT","content":"  const files: Record<string, StatusEntry> = {};","oldN":273,"newN":273},{"type":"REMOVED","parts":[],"n":275},{"type":"ADDED","parts":[],"n":275},{"type":"CONTEXT","content":"  for (let i = 0; i < statusLines.length; i++) {","oldN":274,"newN":274},{"type":"CONTEXT","content":"","oldN":276,"newN":276}]},{"oldLineCount":9,"oldLineStart":405,"newLineCount":16,"newLineStart":403,"lines":[{"type":"CONTEXT","content":"         oldLineEnd < file.oldLineCount - contextLinesCount;\n","oldN":405,"newN":403},{"type":"CONTEXT","content":" \n","oldN":406,"newN":404},{"type":"REMOVED","n":407,"parts":[{"type":"CONTEXT","content":"      "}]},{"type":"REMOVED","parts":[],"n":408},{"type":"REMOVED","parts":[],"n":409},{"type":"REMOVED","parts":[],"n":410},{"type":"REMOVED","parts":[],"n":411},{"type":"REMOVED","parts":[],"n":412},{"type":"REMOVED","parts":[],"n":413},{"type":"REMOVED","parts":[],"n":414},{"type":"ADDED","n":405,"parts":[{"type":"CONTEXT","content":"      "},{"type":"DIFF","content":"console.log({"}]},{"type":"ADDED","parts":[{"type":"DIFF","content":"        k,"}],"n":406},{"type":"ADDED","parts":[{"type":"DIFF","content":"        hasLeadingSpaceForContext,"}],"n":407},{"type":"ADDED","parts":[{"type":"DIFF","content":"        hasTrailingSpaceForContext,"}],"n":408},{"type":"ADDED","parts":[{"type":"DIFF","content":"        diffLine,"}],"n":409},{"type":"ADDED","parts":[{"type":"DIFF","content":"      });"}],"n":410},{"type":"ADDED","parts":[],"n":411},{"type":"ADDED","parts":[],"n":412},{"type":"REMOVED","parts":[{"type":"CONTEXT","content":"        (k < "},{"type":"DIFF","content":"contextLinesCount"},{"type":"CONTEXT","content":" && hasLeadingSpaceForContext) ||"}],"n":415},{"type":"REMOVED","parts":[{"type":"CONTEXT","content":"        (k > rawLines.length - "},{"type":"DIFF","content":"contextLinesCount"},{"type":"CONTEXT","content":" && hasTrailingSpaceForContext)"}],"n":416},{"type":"REMOVED","parts":[],"n":417},{"type":"ADDED","parts":[{"type":"CONTEXT","content":"        (k < "},{"type":"DIFF","content":"2"},{"type":"CONTEXT","content":" && hasLeadingSpaceForContext) ||"}],"n":413},{"type":"ADDED","parts":[{"type":"CONTEXT","content":"        (k > rawLines.length - "},{"type":"DIFF","content":"3"},{"type":"CONTEXT","content":" && hasTrailingSpaceForContext)"}],"n":414},{"type":"ADDED","parts":[],"n":415},{"type":"CONTEXT","content":"      if (","oldN":414,"newN":412},{"type":"REMOVED","parts":[],"n":418},{"type":"ADDED","parts":[],"n":416},{"type":"CONTEXT","content":"      ) {","oldN":417,"newN":415},{"type":"REMOVED","parts":[],"n":419},{"type":"ADDED","parts":[],"n":417},{"type":"CONTEXT","content":"        currentHunk.lines.push({","oldN":418,"newN":416},{"type":"CONTEXT","content":"","oldN":420,"newN":418}]},{"oldLineCount":15,"oldLineStart":539,"newLineCount":6,"newLineStart":544,"lines":[{"type":"CONTEXT","content":" \n","oldN":539,"newN":544},{"type":"CONTEXT","content":"     const flushHunkPart = () => {\n","oldN":540,"newN":545},{"type":"REMOVED","n":541,"parts":[{"type":"DIFF","content":"      // console.log("}]},{"type":"REMOVED","parts":[{"type":"DIFF","content":"      //   \"FLUSHING HUNK PART\","}],"n":542},{"type":"REMOVED","parts":[{"type":"DIFF","content":"      //   \"ADDED\","}],"n":543},{"type":"REMOVED","parts":[{"type":"DIFF","content":"      //   currentHunkPart.addedLines,"}],"n":544},{"type":"REMOVED","parts":[{"type":"DIFF","content":"      //   \"REMOVED\","}],"n":545},{"type":"REMOVED","parts":[{"type":"DIFF","content":"      //   currentHunkPart.removedLines,"}],"n":546},{"type":"REMOVED","parts":[{"type":"DIFF","content":"      //   \"CONTEXT\","}],"n":547},{"type":"REMOVED","parts":[{"type":"DIFF","content":"      //   currentHunkPart.trailingContext,"}],"n":548},{"type":"REMOVED","parts":[{"type":"DIFF","content":"      // );"}],"n":549},{"type":"REMOVED","parts":[],"n":550},{"type":"ADDED","parts":[],"n":547},{"type":"ADDED","parts":[],"n":548},{"type":"ADDED","parts":[],"n":549},{"type":"ADDED","parts":[],"n":550},{"type":"ADDED","parts":[],"n":551},{"type":"ADDED","parts":[],"n":552},{"type":"ADDED","parts":[],"n":553},{"type":"ADDED","parts":[],"n":554},{"type":"ADDED","parts":[],"n":555},{"type":"REMOVED","parts":[],"n":551},{"type":"ADDED","parts":[],"n":556},{"type":"CONTEXT","content":"      currentHunk.lines = [","oldN":550,"newN":555},{"type":"REMOVED","parts":[],"n":552},{"type":"ADDED","parts":[],"n":557},{"type":"CONTEXT","content":"        ...currentHunk.lines,","oldN":551,"newN":556},{"type":"CONTEXT","content":"","oldN":553,"newN":558}]},{"oldLineCount":6,"oldLineStart":617,"newLineCount":7,"newLineStart":613,"lines":[{"type":"CONTEXT","content":"     };\n","oldN":617,"newN":613},{"type":"CONTEXT","content":" \n","oldN":618,"newN":614},{"type":"REMOVED","n":619,"parts":[{"type":"CONTEXT","content":"    "}]},{"type":"REMOVED","parts":[],"n":620},{"type":"ADDED","n":615,"parts":[{"type":"CONTEXT","content":"    "},{"type":"DIFF","content":"console.log({ splitted: rawHunkDiff.split(\""}]},{"type":"ADDED","parts":[],"n":616},{"type":"REMOVED","parts":[],"n":621},{"type":"ADDED","parts":[],"n":617},{"type":"CONTEXT","content":")[0] });","oldN":620,"newN":616},{"type":"REMOVED","parts":[],"n":622},{"type":"ADDED","parts":[],"n":618},{"type":"CONTEXT","content":"    const rawLines = rawHunkDiff.split(\"","oldN":621,"newN":617},{"type":"REMOVED","parts":[],"n":623},{"type":"ADDED","parts":[],"n":619},{"type":"CONTEXT","content":").slice(1);","oldN":622,"newN":618},{"type":"REMOVED","parts":[],"n":624},{"type":"ADDED","parts":[],"n":620},{"type":"CONTEXT","content":"    for (let k = 0; k < rawLines.length; k++) {","oldN":623,"newN":619},{"type":"CONTEXT","content":"","oldN":625,"newN":621}]},{"oldLineCount":8,"oldLineStart":629,"newLineCount":9,"newLineStart":626,"lines":[{"type":"CONTEXT","content":" \n","oldN":629,"newN":626},{"type":"CONTEXT","content":"       if (\n","oldN":630,"newN":627},{"type":"REMOVED","n":631,"parts":[{"type":"CONTEXT","content":"        (k < contextLinesCount "},{"type":"CONTEXT","content":" && hasLeadingSpaceForContext) ||"}]},{"type":"REMOVED","parts":[{"type":"CONTEXT","content":"        (k > rawLines.length - "},{"type":"DIFF","content":"contextLinesCount"},{"type":"CONTEXT","content":" &&"}],"n":632},{"type":"REMOVED","parts":[],"n":633},{"type":"ADDED","n":628,"parts":[{"type":"CONTEXT","content":"        (k < contextLinesCount "},{"type":"DIFF","content":"- 1"},{"type":"CONTEXT","content":" && hasLeadingSpaceForContext) ||"}]},{"type":"ADDED","parts":[{"type":"CONTEXT","content":"        (k > rawLines.length - "},{"type":"DIFF","content":"(contextLinesCount - 1)"},{"type":"CONTEXT","content":" &&"}],"n":629},{"type":"ADDED","parts":[],"n":630},{"type":"REMOVED","parts":[],"n":634},{"type":"ADDED","parts":[],"n":631},{"type":"CONTEXT","content":"          hasTrailingSpaceForContext)","oldN":633,"newN":630},{"type":"REMOVED","parts":[],"n":635},{"type":"ADDED","parts":[],"n":632},{"type":"CONTEXT","content":"      ) {","oldN":634,"newN":631},{"type":"REMOVED","parts":[],"n":636},{"type":"ADDED","parts":[],"n":633},{"type":"CONTEXT","content":"        currentHunk.lines.push({","oldN":635,"newN":632},{"type":"CONTEXT","content":"","oldN":637,"newN":634}]},{"oldLineCount":27,"oldLineStart":695,"newLineCount":37,"newLineStart":693,"lines":[{"type":"CONTEXT","content":"         const lastLinePartIndex =\n","oldN":695,"newN":693},{"type":"CONTEXT","content":"           diffLineParts.length > 0 ? diffLineParts.length - 1 : 0;\n","oldN":696,"newN":694},{"type":"REMOVED","n":697,"parts":[{"type":"CONTEXT","content":"        "},{"type":"CONTEXT","content":" if "},{"type":"DIFF","content":"(diffLineParts[lastLinePartIndex]?.startsWith(\"+\"))"},{"type":"CONTEXT","content":" {"}]},{"type":"REMOVED","parts":[],"n":698},{"type":"ADDED","n":695,"parts":[{"type":"CONTEXT","content":"        "},{"type":"DIFF","content":"//"},{"type":"CONTEXT","content":" if "},{"type":"DIFF","content":"(hasAddedPart)"},{"type":"CONTEXT","content":" {"}]},{"type":"ADDED","parts":[],"n":696},{"type":"REMOVED","parts":[],"n":699},{"type":"ADDED","parts":[],"n":697},{"type":"CONTEXT","content":"        currentHunkPart.addedLines.push({","oldN":698,"newN":696},{"type":"REMOVED","parts":[],"n":700},{"type":"ADDED","parts":[],"n":698},{"type":"CONTEXT","content":"          type: \"ADDED\",","oldN":699,"newN":697},{"type":"REMOVED","parts":[],"n":701},{"type":"ADDED","parts":[],"n":699},{"type":"CONTEXT","content":"          parts: [],","oldN":700,"newN":698},{"type":"REMOVED","parts":[],"n":702},{"type":"ADDED","parts":[],"n":700},{"type":"CONTEXT","content":"          n: newLineStart + k + 1,","oldN":701,"newN":699},{"type":"REMOVED","parts":[{"type":"CONTEXT","content":"        "},{"type":"CONTEXT","content":" }"}],"n":703},{"type":"REMOVED","parts":[],"n":704},{"type":"REMOVED","parts":[{"type":"CONTEXT","content":"        "},{"type":"CONTEXT","content":" if "},{"type":"DIFF","content":"(diffLineParts[lastLinePartIndex]?.startsWith(\"-\"))"},{"type":"CONTEXT","content":" {"}],"n":705},{"type":"REMOVED","parts":[],"n":706},{"type":"ADDED","parts":[{"type":"CONTEXT","content":"        "},{"type":"DIFF","content":"//"},{"type":"CONTEXT","content":" }"}],"n":701},{"type":"ADDED","parts":[],"n":702},{"type":"ADDED","parts":[{"type":"CONTEXT","content":"        "},{"type":"DIFF","content":"//"},{"type":"CONTEXT","content":" if "},{"type":"DIFF","content":"(hasRemovedPart)"},{"type":"CONTEXT","content":" {"}],"n":703},{"type":"ADDED","parts":[],"n":704},{"type":"CONTEXT","content":"        });","oldN":702,"newN":700},{"type":"REMOVED","parts":[],"n":707},{"type":"ADDED","parts":[],"n":705},{"type":"CONTEXT","content":"        currentHunkPart.removedLines.push({","oldN":706,"newN":704},{"type":"REMOVED","parts":[],"n":708},{"type":"ADDED","parts":[],"n":706},{"type":"CONTEXT","content":"          type: \"REMOVED\",","oldN":707,"newN":705},{"type":"REMOVED","parts":[],"n":709},{"type":"ADDED","parts":[],"n":707},{"type":"CONTEXT","content":"          parts: [],","oldN":708,"newN":706},{"type":"REMOVED","parts":[{"type":"CONTEXT","content":"        "}],"n":710},{"type":"REMOVED","parts":[],"n":711},{"type":"REMOVED","parts":[],"n":712},{"type":"REMOVED","parts":[],"n":713},{"type":"REMOVED","parts":[],"n":714},{"type":"REMOVED","parts":[],"n":715},{"type":"REMOVED","parts":[],"n":716},{"type":"REMOVED","parts":[],"n":717},{"type":"REMOVED","parts":[],"n":718},{"type":"REMOVED","parts":[],"n":719},{"type":"ADDED","parts":[{"type":"CONTEXT","content":"        "},{"type":"DIFF","content":"});"}],"n":708},{"type":"ADDED","parts":[{"type":"DIFF","content":"        // }"}],"n":709},{"type":"ADDED","parts":[],"n":710},{"type":"ADDED","parts":[{"type":"DIFF","content":"        if (oldLineStart === 405) {"}],"n":711},{"type":"ADDED","parts":[{"type":"DIFF","content":"          console.log({"}],"n":712},{"type":"ADDED","parts":[{"type":"DIFF","content":"            k,"}],"n":713},{"type":"ADDED","parts":[{"type":"DIFF","content":"            lastLine: diffLineParts[lastLinePartIndex],"}],"n":714},{"type":"ADDED","parts":[{"type":"DIFF","content":"            diffLine,"}],"n":715},{"type":"ADDED","parts":[{"type":"DIFF","content":"            nextRawLineParts,"}],"n":716},{"type":"ADDED","parts":[],"n":717},{"type":"CONTEXT","content":"          n: oldLineStart + k + 1,","oldN":709,"newN":707},{"type":"REMOVED","parts":[],"n":720},{"type":"ADDED","parts":[],"n":718},{"type":"CONTEXT","content":"          });","oldN":719,"newN":717},{"type":"REMOVED","parts":[],"n":721},{"type":"REMOVED","parts":[],"n":722},{"type":"ADDED","parts":[],"n":719},{"type":"ADDED","parts":[],"n":720},{"type":"CONTEXT","content":"        }","oldN":720,"newN":718},{"type":"REMOVED","parts":[],"n":723},{"type":"ADDED","parts":[],"n":721},{"type":"CONTEXT","content":"        if (","oldN":722,"newN":720},{"type":"REMOVED","parts":[],"n":724},{"type":"ADDED","parts":[],"n":722},{"type":"CONTEXT","content":"          nextRawLineParts?.length > 0 &&","oldN":723,"newN":721},{"type":"REMOVED","parts":[],"n":725},{"type":"ADDED","parts":[],"n":723},{"type":"CONTEXT","content":"          !nextRawLineParts?.some(","oldN":724,"newN":722},{"type":"REMOVED","parts":[],"n":726},{"type":"ADDED","parts":[],"n":724},{"type":"CONTEXT","content":"            (part) => part.startsWith(\"+\") || part.startsWith(\"-\"),","oldN":725,"newN":723},{"type":"REMOVED","parts":[],"n":727},{"type":"ADDED","parts":[],"n":725},{"type":"CONTEXT","content":"          )","oldN":726,"newN":724},{"type":"REMOVED","parts":[{"type":"CONTEXT","content":"          "}],"n":728},{"type":"REMOVED","parts":[],"n":729},{"type":"ADDED","parts":[{"type":"CONTEXT","content":"          "},{"type":"DIFF","content":"console.log(\"Flusing HUNK PART\");"}],"n":726},{"type":"ADDED","parts":[],"n":727},{"type":"CONTEXT","content":"        ) {","oldN":727,"newN":725},{"type":"REMOVED","parts":[],"n":730},{"type":"ADDED","parts":[],"n":728},{"type":"CONTEXT","content":"          flushHunkPart();","oldN":729,"newN":727},{"type":"REMOVED","parts":[],"n":731},{"type":"ADDED","parts":[],"n":729},{"type":"CONTEXT","content":"        }","oldN":730,"newN":728},{"type":"CONTEXT","content":"","oldN":732,"newN":730}]}],"displayPaths":["server/modules/diff/domain/services.ts"]}